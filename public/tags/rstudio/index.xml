<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Rstudio on R-Gators</title>
    <link>/tags/rstudio/index.xml</link>
    <description>Recent content in Rstudio on R-Gators</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <atom:link href="/tags/rstudio/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Introduction to R and RStudio</title>
      <link>/2017/08/30/introduction-to-r-and-rstudio/</link>
      <pubDate>Wed, 30 Aug 2017 00:00:00 +0000</pubDate>
      
      <guid>/2017/08/30/introduction-to-r-and-rstudio/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;../data/intro-to-r.pdf&#34;&gt;link to pdf&lt;/a&gt;&lt;/p&gt;

&lt;iframe src=&#34;../data/intro-to-r.pdf&#34; width=&#34;100%&#34; height=&#34;500px&#34;&gt;&lt;/iframe&gt;

&lt;h2 id=&#34;links&#34;&gt;Links&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://board.net/p/ufr-2017-08-30&#34;&gt;Etherpad notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.datacarpentry.org/R-ecology-lesson/&#34;&gt;Data Carpentry R lesson&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.r-project.org/&#34;&gt;Download R&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.rstudio.com/products/rstudio/download/#download&#34;&gt;Download RStudio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;why-r&#34;&gt;Why R?&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;R doesn&amp;rsquo;t involve pointing and clicking&lt;/li&gt;
&lt;li&gt;Great for reproducibility&lt;/li&gt;
&lt;li&gt;Works for all sorts of data&lt;/li&gt;
&lt;li&gt;Creating awesome graphics&lt;/li&gt;
&lt;li&gt;Interdisplincary with a large community&lt;/li&gt;
&lt;li&gt;Free, open-source, and cross-platform&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;rstudio&#34;&gt;RStudio&lt;/h2&gt;

&lt;p&gt;RStudio is a free Integrated Development Environment (IDE) for working with R&lt;/p&gt;

&lt;p&gt;This provides a framework for:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Writing code&lt;/li&gt;
&lt;li&gt;Navigating files&lt;/li&gt;
&lt;li&gt;Visualizing packages&lt;/li&gt;
&lt;li&gt;Creating projects&lt;/li&gt;
&lt;li&gt;Many other goodies (version control, making packages, Shiny apps)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;rstudio-projects&#34;&gt;RStudio Projects&lt;/h2&gt;

&lt;p&gt;Projects in RStudio create a folder for storing all of our files (data, scripts, images)&lt;/p&gt;

&lt;p&gt;Eliminates the need for setting our working directory with &lt;code&gt;setwd()&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;It is useful to created individual folders within the project for storing &lt;code&gt;data\&lt;/code&gt;, &lt;code&gt;scripts\&lt;/code&gt;, &lt;code&gt;images\&lt;/code&gt;, etc.&lt;/p&gt;

&lt;p&gt;When you want to open your project to a new computer, just copy this entire folder onto the new machine&lt;/p&gt;

&lt;h2 id=&#34;interacting-with-r&#34;&gt;Interacting with R&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Using the console

&lt;ul&gt;
&lt;li&gt;Immediately execute commands&lt;/li&gt;
&lt;li&gt;Console shows &lt;code&gt;&amp;gt;&lt;/code&gt; when ready to accept a command&lt;/li&gt;
&lt;li&gt;Console shows &lt;code&gt;+&lt;/code&gt; when waiting for more information

&lt;ul&gt;
&lt;li&gt;Press &lt;kbd&gt;&lt;code&gt;Esc&lt;/code&gt;&lt;/kbd&gt; to cancel incomplete commands&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Writing scripts

&lt;ul&gt;
&lt;li&gt;Creates a complete record of our process&lt;/li&gt;
&lt;li&gt;Execute commands directly from the script editor by using the &lt;kbd&gt;&lt;code&gt;Ctrl&lt;/code&gt;&lt;/kbd&gt; + &lt;kbd&gt;&lt;code&gt;Enter&lt;/code&gt;&lt;/kbd&gt; (&lt;kbd&gt;&lt;code&gt;Cmd&lt;/code&gt;&lt;/kbd&gt; + &lt;kbd&gt;&lt;code&gt;Return&lt;/code&gt;&lt;/kbd&gt; on Mac)&lt;/li&gt;
&lt;li&gt;Run the entire script using &lt;kbd&gt;&lt;code&gt;Ctrl&lt;/code&gt;&lt;/kbd&gt; + &lt;kbd&gt;&lt;code&gt;Shift&lt;/code&gt;&lt;/kbd&gt; + &lt;kbd&gt;&lt;code&gt;Enter&lt;/code&gt;&lt;/kbd&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;using-help-files&#34;&gt;Using Help Files&lt;/h2&gt;

&lt;p&gt;Use &lt;code&gt;?&lt;/code&gt; to get the help file for a function&lt;/p&gt;

&lt;p&gt;Use &lt;code&gt;args()&lt;/code&gt; function to get the arguments for a function&lt;/p&gt;

&lt;p&gt;Use &lt;code&gt;??&lt;/code&gt; to search for a term in help files&lt;/p&gt;

&lt;p&gt;Look at the Cheatsheets in the &lt;code&gt;Help&lt;/code&gt; tab in RStudio&lt;/p&gt;

&lt;h2 id=&#34;creating-objects-variables&#34;&gt;Creating objects/variables&lt;/h2&gt;

&lt;p&gt;We can assign &lt;em&gt;values&lt;/em&gt; to &lt;em&gt;objects&lt;/em&gt; using the assignment operator, and use R to do useful things:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;weight_kg &amp;lt;- 55
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You may come across code that assigns values using &lt;code&gt;=&lt;/code&gt; instead of &lt;code&gt;&amp;lt;-&lt;/code&gt;, which can have some &lt;a href=&#34;https://web.archive.org/web/20130610005305/https://stat.ethz.ch/pipermail/r-help/2009-March/191462.html&#34;&gt;slight differences&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It is good practice to stick with&lt;code&gt;&amp;lt;-&lt;/code&gt; for assigning values&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;2.2 * weight_kg  # Do math with variables

weight_kg &amp;lt;- 57.5  # Save over an variables with new value(s)
2.2 * weight_kg

weight_lb &amp;lt;- 2.2 * weight_kg  # Create new variables with old ones
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;functions-and-arguments&#34;&gt;Functions and arguments&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Functions&lt;/strong&gt; are &amp;ldquo;canned scripts&amp;rdquo; which automate series of commands on one or more inputs called &lt;strong&gt;arguments&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;b &amp;lt;- sqrt(a)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Arguments can be anything (numbers, filenames, variables), &lt;em&gt;options&lt;/em&gt; are arguments that take on default values which can be altered by the user&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;round(3.14159)
args(round)
round(3.14159, digits = 2)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It is also possible (and very useful) to create your own functions&lt;/p&gt;

&lt;h2 id=&#34;vectors-and-data-types&#34;&gt;Vectors and data types&lt;/h2&gt;

&lt;p&gt;We can save multiple values into a single variable, called a &lt;strong&gt;vector&lt;/strong&gt;, using the &lt;code&gt;c()&lt;/code&gt; function:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;weight_g &amp;lt;- c(50, 60, 65, 82)
weight_g
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Vectors can also contain characters:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;animals &amp;lt;- c(&amp;quot;mouse&amp;quot;, &amp;quot;rat&amp;quot;, &amp;quot;dog&amp;quot;)
animals
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Some useful functions:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;length(weight_g)  # Counts the number of elements in the vector
class(weight_g)   # Identifies the type of elements 
str(weight_g)     # Display structure of object
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;datatypes-in-r&#34;&gt;Datatypes in R&lt;/h2&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Class&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;numeric&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Numbers, including decimals&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;character&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Strings (text)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;logical&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;TRUE/FALSE (Boolean)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;integer&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Integer values&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;factor&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Categorial variables (including strings)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;subsetting-vectors&#34;&gt;Subsetting vectors&lt;/h2&gt;

&lt;p&gt;Subsetting vectors is done using square brackets:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;animals &amp;lt;- c(&amp;quot;mouse&amp;quot;, &amp;quot;rat&amp;quot;, &amp;quot;dog&amp;quot;, &amp;quot;cat&amp;quot;)
animals[2]
animals[c(3, 2)]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Conditional subsetting can be done using &lt;code&gt;TRUE/FALSE&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;weight_g &amp;lt;- c(21, 34, 39, 54, 55)
weight_g[c(TRUE, FALSE, TRUE, TRUE, FALSE)]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can combine logical operators, like &lt;code&gt;&amp;lt;&lt;/code&gt; and &lt;code&gt;&amp;gt;&lt;/code&gt;, with &lt;code&gt;TRUE/FALSE&lt;/code&gt; to subset only &lt;code&gt;TRUE&lt;/code&gt; values:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;weight_g &amp;gt; 50            # Returns vector of TRUE/FALSE
weight_g[weight_g &amp;gt; 50]   # Returns vector of only TRUE elements
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;multiple-subsets-using-and-and-or&#34;&gt;Multiple subsets using AND and OR&lt;/h2&gt;

&lt;p&gt;We can subset on multiple conditions using &lt;code&gt;&amp;amp;&lt;/code&gt; for AND conditions (ie both are TRUE), and &lt;code&gt;|&lt;/code&gt; for OR conditions (ie either are TRUE):&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;weight_g[weight_g &amp;lt; 30 | weight_g &amp;gt; 50]
weight_g[weight_g &amp;gt;= 30 &amp;amp; weight_g == 21]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Notice that we use &lt;code&gt;==&lt;/code&gt; when subsetting instead of &lt;code&gt;=&lt;/code&gt;, which is an assigning operator&lt;/p&gt;

&lt;p&gt;&lt;code&gt;a = 4&lt;/code&gt; can be read as 4 &lt;em&gt;goes into&lt;/em&gt; a&lt;/p&gt;

&lt;p&gt;&lt;code&gt;a == 4&lt;/code&gt; can be read as a &lt;em&gt;is equal to&lt;/em&gt; 4&lt;/p&gt;

&lt;h2 id=&#34;searching-for-elements&#34;&gt;Searching for elements&lt;/h2&gt;

&lt;p&gt;One common task is searching for certain values or string:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;animals &amp;lt;- c(&amp;quot;bear&amp;quot;, &amp;quot;tiger&amp;quot;, &amp;quot;dog&amp;quot;, &amp;quot;cat&amp;quot;, &amp;quot;lion&amp;quot;) 
# Find pets
animals[animals == &amp;quot;dog&amp;quot; | animals == &amp;quot;cat&amp;quot; | animals == &amp;quot;mouse&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Using &lt;code&gt;|&lt;/code&gt; can get tedious, instead use &lt;code&gt;%in%&lt;/code&gt; to test if any elements in a search vector are present&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;pets &amp;lt;- c(&amp;quot;dog&amp;quot;, &amp;quot;cat&amp;quot;, &amp;quot;mouse&amp;quot;)
pets %in% animals
pets[pets %in% animals]
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;reading-csv-datafiles-into-r&#34;&gt;Reading CSV datafiles into R&lt;/h2&gt;

&lt;p&gt;We often store our data in comma seperated value (CSV) files, which can be read into R using the &lt;code&gt;read.csv()&lt;/code&gt; function:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# Download example .csv file
download.file(&amp;quot;https://ndownloader.figshare.com/files/2292169&amp;quot;,
              &amp;quot;data/portal_data_joined.csv&amp;quot;)

# Save into variable 
surveys &amp;lt;- read.csv(&#39;data/portal_data_joined.csv&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note: this code requires having a &lt;code&gt;data/&lt;/code&gt; folder in your project&lt;/p&gt;

&lt;h2 id=&#34;functions-for-characterizing-dataframe&#34;&gt;Functions for characterizing dataframe&lt;/h2&gt;

&lt;p&gt;We can run the name of the variable to view the dataframe, but often there will be too much information to display in the console&lt;/p&gt;

&lt;p&gt;Here are some useful functions for characterizing a dataframe:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;head(surveys)     # Top of dataframe
tail(surveys)     # Bottom of dataframe
dim(surveys)      # Dimensions
ncol(surveys)     # Number of columns
nrow(surveys)     # Number of rows
names(surveys)    # Column names
rownames(surveys) # Row names
str(surveys)      # Structure, with class, length, and content
summary(surveys)  # Summary statistics for each columns
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;indexing-and-subsetting-dataframes&#34;&gt;Indexing and subsetting dataframes&lt;/h2&gt;

&lt;p&gt;Dataframes are also subsetted or &lt;em&gt;indexed&lt;/em&gt; with square brackets, expect we must specify rows then columns&lt;code&gt;[row,column]&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;surveys[1, 1]   # first element in the first column of the data frame (as a vector)
surveys[1, 6]   # first element in the 6th column (as a vector)
surveys[, 1]    # first column in the data frame (as a vector)
surveys[1]      # first column in the data frame (as a data.frame)
surveys[1:3, 7] # first three elements in the 7th column (as a vector)
surveys[3, ]    # the 3rd element for all columns (as a data.frame)
head_surveys &amp;lt;- surveys[1:6, ] # equivalent to head(surveys)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Use the &lt;code&gt;-&lt;/code&gt; sign to exclude certain sections:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;surveys[,-1]          # The whole data frame, except the first column
surveys[-c(7:34786),] # Equivalent to head(surveys)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;subsetting-columns-by-name&#34;&gt;Subsetting columns by name&lt;/h2&gt;

&lt;p&gt;Columns can be selected by name using the these operators:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;surveys[&amp;quot;species_id&amp;quot;]       # Result is a data.frame
surveys[, &amp;quot;species_id&amp;quot;]     # Result is a vector
surveys[[&amp;quot;species_id&amp;quot;]]     # Result is a vector
surveys$species_id          # Result is a vector
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;factors&#34;&gt;Factors&lt;/h2&gt;

&lt;p&gt;Factors are used for storing categorical data, which are separated into &lt;strong&gt;levels&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;sex &amp;lt;- factor(c(&amp;quot;male&amp;quot;, &amp;quot;female&amp;quot;, &amp;quot;female&amp;quot;, &amp;quot;male&amp;quot;))
levels(sex)
nlevels(sex)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can rename the levels in a factor, either individually or all at once:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;levels(sex)[1] &amp;lt;- &amp;quot;F&amp;quot;       # Change the first element
levels(sex) &amp;lt;- c(&amp;quot;F&amp;quot;, &amp;quot;M&amp;quot;)  # Change all factors
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Finally, we may want to convert factors to &lt;code&gt;char&lt;/code&gt; or &lt;code&gt;numeric&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;as.character(sex)
f &amp;lt;- factor(c(1990, 1983, 1977, 1998, 1990))
as.numeric(levels(f))[f] # We want to use the levels in this case
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;exercises&#34;&gt;Exercises&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;What type of vectors are each of the columns in the &lt;code&gt;surveys&lt;/code&gt; dataframe?&lt;/li&gt;
&lt;li&gt;How many &lt;em&gt;Neotoma albigula&lt;/em&gt; were collected in 1990?&lt;/li&gt;
&lt;li&gt;Create a new dataframe that only contains records these &lt;code&gt;species_id&lt;/code&gt;: RM, OL, and PP.&lt;/li&gt;
&lt;li&gt;With this new dataframe, use the &lt;code&gt;plot()&lt;/code&gt; function to display the number of each &lt;code&gt;sex&lt;/code&gt;. Be sure all levels are correctly labelled.&lt;/li&gt;
&lt;li&gt;Create a similar plot for the number of specimens caught in each year.&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
  </channel>
</rss>